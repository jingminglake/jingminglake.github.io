---
layout:     post
title:      Webhook
subtitle:   理解
date: 2020-12-07
author:     Jingming
status: public
catalog: true
tags:
    - Web
---

Webhook的作用是反向API。意思是：客户端在服务器配置自己的API url（称为订阅），等待事件发生的时候，服务器去调用客户端的API url来做事（行为）。一种Http请求的回调。

举个例子：微信客户端加了某人为好友，并设置可以查看对方的状态，这意味着什么？

这意味着自己的微信账户添加到好友的通知列表，该好友发状态的时候，会自动通知自己所有的好友微信账户，其中就包括自己的微信账号。

也就是说，客户端获取具体服务器信息的时候，并不是自己主动去调服务器，而是放个钩子在客户端（订阅、也就是把自己的api、url等联系方式给别人），等服务器有消息时候主动告诉自己。

Webhook再举例： git webhook。 在git webhook配置好Jekins的地址，这样，
git push之后，git去调用jenkins去相应的构建以及部署。

再举个例子：A公司比较大，且有一套全面的API服务；B公司属于初创公司，有一些自己特色（例如自己作为平台，可以把流量导入多个公司），且有相关的大量的用户。

现在B公司和A公司合作，A公司需要B公司的用户，B公司需要A公司的基本服务。那么B公司可以使用webhook技术，例如建立队列，把其中访问A公司

服务的流量导入A公司相关的API中。

再举个上面例子的变种：A公司的功能被集成到B公司的平台。这样用户在使用服务的时候，虽然是从B公司的平台进入，但是实际上之后还是

使用A公司的账户登陆，也就是说，该用户本质上是属于A公司的。此时A公司有用户，假设此时A公司没有相应的服务，但是B有，那么A可以把自己的

用户导到B公司，也就是使用B公司的webhook。这样B公司就能享有A公司的客户。

